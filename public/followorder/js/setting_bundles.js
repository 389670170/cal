window.Switch=function(t){for(var e=document.getElementsByClassName("switch"),i=0,n=e.length;i<n;i++)e[i].addEventListener("change",function(e){t(e.target)})},function(t,e){var i=t,s=e;function u(e){return s.getElementById(e)}function h(e,t,i){for(var n=e;n<t&&!i(n);n++);}function a(e,t,i){s.addEventListener(e,function(e){t!==e.target.tagName.toLowerCase()&&t!==e.target.className&&t!==e.target.id||i(e)})}function n(e){this.input=e.input,this.container=e.container,this.type=0,this.param=e.param,this.title=e.title||"开始时间",this.beginTime=(e.beginTime||[]).map(function(e){return Number(e)}),this.endTime=(e.endTime||[]).map(function(e){return Number(e)}),this.recentTime=(e.recentTime||[]).map(function(e){return Number(e)}),this.success=e.success,this.ulCount=0,this.ulDomArr=[],this.idxArr=[],this.liHeight=t.lib?1*Number(s.getElementsByTagName("HTML")[0].style.fontSize.replace("px","")):40,this.maxHeight=[],this.distance=[],this.start={Y:0,time:""},this.move={Y:0,speed:[]},this.end={Y:0,index:0},this.resultArr=[],this.begin_time=[1970,1,1,0,0],this.end_time=[(new Date).getFullYear()+1,12,31,23,59],this.recent_time=[(new Date).getFullYear(),(new Date).getMonth()+1,(new Date).getDate(),(new Date).getHours(),(new Date).getMinutes()],this.initDomFuc(),this.initReady(),this.initBinding()}n.prototype={constructor:n,checkParam:function(){var t=[],i=this;h(0,i.param.length,function(e){0<i.param[e]&&t.push(e)}),this.ulCount=t[t.length-1]-t[0]+1,h(t[0],t[t.length-1]+1,function(e){i.param[e]=1,i.idxArr.push(e)})},checkTime:function(){var t=this,i=this.begin_time,n=this.end_time,r=this.recent_time;if(0==t.beginTime.length&&h(0,t.idxArr.length,function(e){t.beginTime.push(i[t.idxArr[e]])}),0==t.endTime.length&&h(0,t.idxArr.length,function(e){t.endTime.push(n[t.idxArr[e]])}),0==t.recentTime.length&&h(0,t.idxArr.length,function(e){t.recentTime.push(r[t.idxArr[e]])}),t.idxArr.length==t.beginTime.length&&t.beginTime.length==t.endTime.length&&t.endTime.length==t.recentTime.length){var s=0;h(0,t.param.length,function(e){if(0==t.param[e])switch(e){case 0:i[e]=(new Date).getFullYear(),n[e]=(new Date).getFullYear();break;case 1:i[e]=(new Date).getMonth()+1,n[e]=(new Date).getMonth()+1;break;case 2:i[e]=(new Date).getDate(),n[e]=(new Date).getDate();break;case 3:i[e]=(new Date).getHours(),n[e]=(new Date).getHours();break;case 4:i[e]=(new Date).getMinutes(),n[e]=(new Date).getMinutes()}else{switch(e){case 0:t.beginTime[s]=i[e]=1900<=t.beginTime[s]?t.beginTime[s]:(new Date).getFullYear(),t.endTime[s]=n[e]=1900<=t.endTime[s]?t.endTime[s]:(new Date).getFullYear()+1,r[e]=t.recentTime[s];break;case 1:t.beginTime[s]=i[e]=0<t.beginTime[s]&&t.beginTime[s]<=12?t.beginTime[s]:1,t.endTime[s]=n[e]=0<t.endTime[s]&&t.endTime[s]<=12?t.endTime[s]:12,r[e]=t.recentTime[s];break;case 2:t.beginTime[s]=i[e]=0<t.beginTime[s]&&t.beginTime[s]<=new Date(i[0],i[1],0).getDate()?t.beginTime[s]:1,t.endTime[s]=n[e]=0<t.endTime[s]&&t.endTime[s]<=new Date(n[0],n[1],0).getDate()?t.endTime[s]:new Date(n[0],n[1],0).getDate(),r[e]=t.recentTime[s];break;case 3:t.beginTime[s]=i[e]=0<=t.beginTime[s]&&t.beginTime[s]<=23?t.beginTime[s]:0,t.endTime[s]=n[e]=0<=t.endTime[s]&&t.endTime[s]<=23?t.endTime[s]:23,r[e]=t.recentTime[s];break;case 4:t.beginTime[s]=i[e]=0<=t.beginTime[s]&&t.beginTime[s]<=59?t.beginTime[s]:0,t.endTime[s]=n[e]=0<=t.endTime[s]&&t.endTime[s]<=59?t.endTime[s]:59,r[e]=t.recentTime[s]}s++}});var e=new Date(i[0],i[1],i[2],i[3],i[4]).getTime(),a=new Date(n[0],n[1],n[2],n[3],n[4]).getTime(),o=new Date(r[0],r[1],r[2],r[3],r[4]).getTime();return o<e&&console.error("当前时间小于开始时间"),a<o&&console.error("当前时间超过结束时间"),e<=o&&o<=a}return console.warn("type为1时,时间数组长度为0或5"),console.warn("构造函数的参数param或recentTime设置有误"),console.warn("param必须是连续的1，recentTime的值必须与param中的值对应"),console.warn("构造函数调用失败，请重新设置参数"),!1},checkTimeArr:function(t,i,e){var n=!0;return h(0,e,function(e){t[e]!=i[e]&&(n=!1)}),n},initDomFuc:function(){var t=this;if(this.checkParam(),this.checkTime()){var i="";i+='<div class="date-selector-bg" id="date-selector-bg-'+t.container+'"><div  class="date-selector-container" id="date-selector-container-'+t.container+'"><div class="date-selector-btn-box"><div class="date-selector-btn" id="date-selector-btn-cancel">返回</div>',i+='<div class="date-selector-title">'+t.title+"</div>",i+='<div class="date-selector-btn" id="date-selector-btn-save-'+t.container+'">确定</div></div><div class="date-selector-content">',0==t.type?(h(0,t.idxArr.length,function(e){i+='<div class="date-selector date-selector-left"><ul id="date-selector-'+t.container+"-"+t.idxArr[e]+'"></ul></div>'}),i+='<div class="date-selector-up-shadow"></div><div class="date-selector-down-shadow"></div><div class="date-selector-line"></div></div>',i+="</div></div>",u(t.container).innerHTML=i,h(0,t.ulCount,function(e){u("date-selector-container-"+t.container).querySelectorAll(".date-selector")[e].style.width=(100/t.ulCount).toFixed(2)+"%"})):1==t.type&&(i+='<div class="date-selector date-selector-left"><ul id="date-selector-'+t.container+'-0"></ul></div><div class="date-selector date-selector-left"><ul id="date-selector-'+t.container+'-1"></ul></div><div class="date-selector date-selector-left"><ul id="date-selector-'+t.container+'-2"></ul></div><div class="date-selector-up-shadow"></div><div class="date-selector-down-shadow"></div><div class="date-selector-line"></div></div><div class="date-selector-content date-selector-content-right"><div class="date-selector date-selector-right"><ul id="date-selector-'+t.container+'-3"></ul></div><div class="date-selector date-selector-right"><ul id="date-selector-'+t.container+'-4"></ul></div><div class="date-selector-up-shadow"></div><div class="date-selector-down-shadow"></div><div class="date-selector-line"></div></div>',i+="</div></div>",u(t.container).innerHTML=i)}},initReady:function(){var s=this,a=0;h(0,s.ulCount,function(e){a=s.idxArr[e];var t=0,i=0,n=u("date-selector-"+s.container+"-"+s.idxArr[e]),r=s["array"+s.idxArr[e]]=[];switch(a){case 0:s.initCommonArr(n,r,s.beginTime[e],s.endTime[e],"年",e);break;case 1:t=s.checkTimeArr(s.begin_time,s.recent_time,1)?s.beginTime[e]:1,i=s.checkTimeArr(s.end_time,s.recent_time,1)?s.endTime[e]:12,s.initCommonArr(n,r,t,i,"月",e);break;case 2:t=s.checkTimeArr(s.begin_time,s.recent_time,2)?s.beginTime[e]:1,i=s.checkTimeArr(s.end_time,s.recent_time,2)?s.endTime[e]:new Date(s.recent_time[0],s.recent_time[1],0).getDate(),s.initCommonArr(n,r,t,i,"日",e);break;case 3:t=s.checkTimeArr(s.begin_time,s.recent_time,3)?s.beginTime[e]:0,i=s.checkTimeArr(s.end_time,s.recent_time,3)?s.endTime[e]:23,s.initCommonArr(n,r,t,i,"时",e);break;case 4:t=s.checkTimeArr(s.begin_time,s.recent_time,4)?s.beginTime[e]:0,i=s.checkTimeArr(s.end_time,s.recent_time,4)?s.endTime[e]:59,s.initCommonArr(n,r,t,i,"分",e)}n.addEventListener("touchstart",function(){s.touch(event,s,n,s["array"+s.idxArr[e]],e)},!1),n.addEventListener("touchmove",function(){s.touch(event,s,n,s["array"+s.idxArr[e]],e)},!1),n.addEventListener("touchend",function(){s.touch(event,s,n,s["array"+s.idxArr[e]],e)},!0)})},show:function(){var e=u("date-selector-bg-"+this.container),t=u("date-selector-container-"+this.container),i=s.body;e.classList.add("date-selector-bg-up","date-selector-bg-delay"),t.classList.add("date-selector-container-up"),i.classList.add("date-selector-locked")},initBinding:function(){var t=this,i=u("date-selector-bg-"+t.container),n=u("date-selector-container-"+t.container),r=s.body;a("touchstart",t.input,function(e){i.classList.add("date-selector-bg-up","date-selector-bg-delay"),n.classList.add("date-selector-container-up"),r.classList.add("date-selector-locked")}),a("touchstart","date-selector-btn-save-"+t.container,function(){var e=t.resultArr.map(function(e){return e<10&&(e="0"+e),e+""});t.success(t.resultArr,e),i.classList.remove("date-selector-bg-up"),n.classList.remove("date-selector-container-up"),setTimeout(function(){i.classList.remove("date-selector-bg-delay")},350),r.classList.remove("date-selector-locked"),t.initReady()}),a("touchstart","date-selector-bg-"+t.container,function(){i.classList.remove("date-selector-bg-up"),n.classList.remove("date-selector-container-up"),setTimeout(function(){i.classList.remove("date-selector-bg-delay")},350),r.classList.remove("date-selector-locked"),t.initReady()}),a("touchstart","date-selector-btn-cancel",function(){i.classList.remove("date-selector-bg-up"),n.classList.remove("date-selector-container-up"),setTimeout(function(){i.classList.remove("date-selector-bg-delay")},350),r.classList.remove("date-selector-locked"),t.initReady()}),a("touchstart","date-selector-tab date-selector-"+t.container+"-tab",function(e){var t=n.getElementsByClassName("date-selector-tab"),i=n.getElementsByClassName("date-selector-content");h(0,t.length,function(e){t[e].classList.remove("date-selector-tab-active")}),e.target.classList.add("date-selector-tab-active"),"年月日"==e.target.innerHTML?(i[0].classList.remove("date-selector-content-left"),i[1].classList.add("date-selector-content-right")):(i[0].classList.add("date-selector-content-left"),i[1].classList.remove("date-selector-content-right"))})},initCommonArr:function(e,t,i,n,r,s){var a=this,o="";h(i,n+1,function(e){t.push(e)}),a.maxHeight.push(a.liHeight*(n-i));var c=a.recentTime[s];a.resultArr.push(c),t.unshift("",""),t.push("",""),e.style.transform="translate3d(0,-"+this.liHeight*(t.indexOf(c)-2)+"px, 0)",e.style.webkitTransform="translate3d(0,-"+this.liHeight*(t.indexOf(c)-2)+"px, 0)",a.distance.push(this.liHeight*(t.indexOf(c)-2)),h(0,t.length,function(e){o+="<li>"+t[e]+(""===t[e]?"":r)+"</li>"}),e.innerHTML=o},initRangeArr:function(e,t,i,n,r){var s=this,a=s.idxArr[n],o=[],c=u("date-selector-"+s.container+"-"+a),l=0;h(e,t+1,function(e){o.push(e)});var d="";o.unshift("",""),o.push("","");for(var m=0;m<o.length;m++)d+="<li>"+o[m]+(""===o[m]?"":i)+"</li>";s["array"+a]=[],s["array"+a]=o,c.innerHTML=d,0==r?(l=e>this.resultArr[n]?0:-o.indexOf(this.resultArr[n])*this.liHeight+2*this.liHeight,this.resultArr[n]=this.resultArr[n]<e?e:this.resultArr[n],this.recent_time[s.idxArr[n]]=s.resultArr[n]):1==r?(l=t>this.resultArr[n]?-o.indexOf(this.resultArr[n])*this.liHeight+2*this.liHeight:-o.indexOf(t)*this.liHeight+2*this.liHeight,this.resultArr[n]=this.resultArr[n]>t?t:this.resultArr[n],this.recent_time[s.idxArr[n]]=s.resultArr[n]):(l=-1==o.indexOf(this.resultArr[n])?this.maxHeight[n]>this.liHeight*(t-e)?-this.liHeight*(t-e):-this.distance[n]:-o.indexOf(this.resultArr[n])*this.liHeight+2*this.liHeight,this.recent_time[a]=-l/this.liHeight+1,this.resultArr[n]=o[-l/this.liHeight+2]),c.style.transform="translate3d(0,"+l+"px, 0)",c.style.webkitTransform="translate3d(0,"+l+"px, 0)",c.style.transition="transform 0.15s ease-out",c.style.webkitTransition="-webkit-transform 0.15s ease-out",this.maxHeight[n]=this.liHeight*(t-e),this.distance[n]=Math.abs(l)},checkRange:function(t,e){var i=this;if(!(t>=i.ulCount-1)){if(!(e?i.checkTimeArr(i.begin_time,i.resultArr,t+1):i.checkTimeArr(i.end_time,i.resultArr,t+1))){var n=0,r=0,s="",a=0;switch(i.idxArr[t]){case 0:n=1,r=12,s="月";break;case 1:n=1,r=new Date(i.recent_time[0],i.recent_time[1],0).getDate(),s="日";break;case 2:n=0,r=23,s="时";break;case 3:n=0,r=59,s="分"}h(0,t+1,function(e){i.beginTime[e]!=i.resultArr[e]&&h(0,t+(a=1),function(e){i.endTime[e]!=i.resultArr[e]&&(a=-1)})}),0==a?n=i.beginTime[t+1]>=n?i.beginTime[t+1]:0:1==a&&(r=i.endTime[t+1]<=r?i.endTime[t+1]:0),i.initRangeArr(n,r,s,t+1,a)}i.checkRange(t+1,e)}},initPosition:function(e,t,i){var n=(e=t<(e=e<0?0:e)?t:e)%this.liHeight;return n<this.liHeight/2?this.distance[i]=e-n:this.distance[i]=e+(this.liHeight-n),this},initSpeed:function(e,t,i,n){var r=0,s=0;for(var a in e)s+=e[a]-0;for(var o in e)r+=(e[o]-s/e.length)*(e[o]-s/e.length);var c=0;return.1<(r/e.length).toFixed(2)?(c=i>15*this.liHeight?2*t:0,this.initPosition(this.distance[n]+c,i,n),this.move.speed[0]=.2):(this.initPosition(this.distance[n],i,n),this.move.speed[0]=.2<this.move.speed[0]?.2:this.move.speed[0]),this},touch:function(e,t,i,n,r){switch((e=e||window.event).preventDefault(),e.type){case"touchstart":t.move.speed=[],t.start.Y=e.touches[0].clientY,t.start.time=Date.now();break;case"touchend":t.end.Y=e.changedTouches[0].clientY;var s=t.distance[r]+(t.start.Y-t.end.Y);t.distance[r]=s<0?0:s<t.maxHeight[r]?s:t.maxHeight[r],t.initSpeed(t.move.speed,t.start.Y-t.end.Y,t.maxHeight[r],r);var a=t.end.index=t.distance[r]/t.liHeight+2;i.style.transform="translate3d(0,-"+t.distance[r]+"px, 0)",i.style.webkitTransform="translate3d(0,-"+t.distance[r]+"px, 0)",i.style.transition="transform "+t.move.speed[0]+"s ease-out",i.style.webkitTransition="-webkit-transform "+t.move.speed[0]+"s ease-out",t.recent_time[t.idxArr[r]]=t.resultArr[r]=t["array"+t.idxArr[r]][a],t.checkRange(0,0<t.start.Y-t.end.Y);break;case"touchmove":e.preventDefault(),t.move.Y=e.touches[0].clientY;var o=t.start.Y-t.move.Y;if(0==t.distance[r]&&o<0?(i.style.transform="translate3d(0,"+1.5*t.liHeight+"px, 0)",i.style.webkitTransform="translate3d(0,"+1.5*t.liHeight+"px, 0)",i.style.transition="transform 0.3s ease-out",i.style.webkitTransition="-webkit-transform 0.3s ease-out"):(i.style.transform="translate3d(0,-"+(o+t.distance[r])+"px, 0)",i.style.webkitTransform="translate3d(0,-"+(o+t.distance[r])+"px, 0)"),this.distance[r]<=-t.maxHeight[r]&&(i.style.transform="translate3d(0, -"+t.liHeight+"px, 0)",i.style.webkitTransform="translate3d(0, -"+t.liHeight+"px, 0)",i.style.transition="transform 0.3s ease-out",i.style.webkitTransition="-webkit-transform 0.3s ease-out"),Math.abs(o).toFixed(0)%5==0){var c=Date.now();t.move.speed.push((Math.abs(o)/(c-t.start.time)).toFixed(2))}}}},"object"==typeof exports?module.exports=n:"function"==typeof define&&define.amd?define([],function(){return n}):i.DateSelector=n}(window,document),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.axreq={})}(this,function(e){"use strict";var o=/^(?:text|application)\/javascript/i,c=/^(?:text|application)\/xml/i;function u(e){var t=!1;return"object"==typeof e&&(t=!(null===e)),t&&Object.getPrototypeOf(e)===Object.prototype}function d(){}var l={method:"GET",processData:!0,contentType:"application/x-www-form-urlencoded;charset=utf-8",complete:d,headers:{}};var m=function(e){var n=[],t=function(e,t){var i="function"==typeof t?t():t;n.push(encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i))};return e instanceof HTMLElement&&"form"===e.tagName.toLowerCase()?function(e,t){for(var i,n=e.elements,r=0,s=n.length;r<s;r++)(i=n[r]).hasAttribute("name")&&("SELECT"===i.tagName?t(i.name,i.options[i.selectedIndex].value):"radio"===i.type||"checkbox"===i.type?i.checked&&t(i.name,i.value):t(i.name,i.value))}(e,t):function e(i,n){var r=null,t=function(t){r=i[t],Array.isArray(r)?r.forEach(function(e){n(t,e)}):u(r)?e(r,n):n(t,r)};for(var s in i)t(s)}(e,t),n.join("&")},h=function(e,i){var n=function e(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n,r,s,a,o=t[0]||{},c=1,l=t.length,d=!1;for("boolean"==typeof o&&(d=o,o=t[c]||{},c++),"object"!=typeof o&&(o={});c<l;c++)if(n=t[c])for(var m in n)(r=o[m])!==(s=n[m])&&(d&&s&&u(s)?(a=!0===Array.isArray(s)?Array.isArray(r)?r:[]:u(r)?r:{},o[m]=e(d,a,s)):null!=s&&(o[m]=s));return o}(l,e),r=new XMLHttpRequest,s=n.responseType;n.data&&!0===n.processData&&"string"!=typeof n.data&&(n.data=m(n.data));var t=n.method.toUpperCase();for(var a in"GET"===t&&n.data&&(n.url=n.url+"?"+n.data,n.data=null),r.onreadystatechange=function(){if(4===r.readyState){r.onreadystatechange=d;var e=void 0;if(200<=r.status&&r.status<300||304===r.status)if(s=s||((t=n.mimeType||r.getResponseHeader("content-type"))&&(t=t.split(";")[0]),t&&("text/html"===t?"html":"application/json"===t?"json":o.test(t)?"script":c.test(t)&&"xml")||"text"),"arraybuffer"===r.responseType||"blob"===r.responseType)e=r.response,i(null,e);else{e=r.responseText;try{"json"===s&&(e=JSON.parse(e)),i(null,e)}catch(e){console.error(e),i(new Error("parseError - "+e.message),null)}}else i(new Error(r.status+" - "+r.statusText||""),null)}var t},r.open(t,n.url),n.data&&"GET"!==t&&n.contentType&&r.setRequestHeader("Content-Type",n.contentType),n.headers)r.setRequestHeader(a,n.headers[a]);r.send(n.data?n.data:null)},n=function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var r=null,s=d;2===i.length?(r=i[0],s=i[1]):"function"===typeof i[0]?s=i[0]:r=i[0];h({url:e,data:r,method:t},s)};e.serialize=m,e.request=h,e.get=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];n.apply(void 0,[e,"GET"].concat(t))},e.post=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];n.apply(void 0,[e,"POST"].concat(t))},e.json=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=null,r="GET",s=!1,a=t.length,o=d;if(1===a)o=t[0];else if(2===a)n=t[0],o=t[1];else if(3===a){n=t[0];var c=typeof t[1];"string"===c?r=t[1]:"boolean"===c&&(s=t[1]),o=t[2]}else 4===a&&(n=t[0],r=t[1],s=t[2],o=t[3]);var l={url:e,data:n,method:r,responseType:"json"};!0===s&&(l.contentType="application/json;charset=utf-8","object"==typeof n&&(l.data=JSON.stringify(n)),l.processData=!1),h(l,o)},Object.defineProperty(e,"__esModule",{value:!0})});